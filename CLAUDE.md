# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Terraform module for managing Yandex Cloud DNS resources (zones and recordsets). Requires Terraform >= 1.3.

## Commands

### Formatting and Validation
```bash
terraform fmt --recursive              # Format all .tf files
terraform fmt --recursive -check=true  # Check formatting without changes
terraform validate                     # Validate configuration (run in module directory)
```

### Linting
```bash
tflint --init                          # Initialize TFLint plugins
tflint -f compact                      # Run TFLint
```

### Pre-commit Hooks
```bash
pre-commit install                     # Install hooks
pre-commit run --all-files             # Run all hooks (fmt, validate, docs, tflint)
```

### Documentation
README files are auto-generated by `terraform_docs` pre-commit hook. Do not edit sections between `<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->` and `<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->` manually.

## Architecture

### Module Structure
- `modules/zone/` - Creates `yandex_dns_zone` resources (public or private DNS zones)
- `modules/recordset/` - Creates `yandex_dns_recordset` resources (A, CNAME, etc.)

### Key Design Patterns
- The recordset module accepts either `zone_id` directly or `zone_name` (which triggers a data source lookup)
- Zone visibility is controlled by `is_public` variable; private zones require `private_networks` list
- All modules follow standard Terraform module structure: main.tf, variables.tf, outputs.tf, versions.tf

### Examples
- `examples/dns_instance/` - Full example with VPC, compute instance, zone, and recordset
- `examples/terraform_remote_state/` - Separated zone and recordset using remote state
